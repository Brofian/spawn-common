{% block table %}
    <table class="{% block table_element_class %}table-listing js-table-listing{% endblock %} js-scalable"
        {% block table_pagination_config %}
            {% if configuration.pagination.itemsPerPage %}
                data-items-per-page="{{ configuration.pagination.itemsPerPage }}"
            {% endif %}
            {% if configuration.pagination.currentPage %}
                data-current-page="{{ configuration.pagination.currentPage }}"
            {% endif %}
            {% if configuration.pagination.hide %}
                data-use-pagination="0"
            {% endif %}
        {% endblock %}
        {% block table_draggable_config %}
            {% if configuration.isPositioned %}
                data-draggable-row-entity="{{ configuration.entityName }}"
                data-id-column="{{ configuration.idColumn }}"
            {% endif %}
        {% endblock %}
    >
        {% block table_inner %}
            {% if configuration.tableHeaders %}
                {% block table_header %}
                    <thead>
                    <tr>

                        {% block table_header_row_selection %}
                            {% if configuration.showRowSelection %}
                                <th class="row-selection-column">
                                    {% set randId = "row_select_"~random(0,99999999) %}
                                    <input type="checkbox" class="toggleAllRows" id="{{ randId }}"/>
                                    <label for="{{ randId }}"></label>
                                </th>
                            {% endif %}

                            {% if configuration.isPositioned %}
                                <th></th>
                            {% endif %}
                        {% endblock %}

                        {% set colIndex = 0 %}
                        {% for headerName in configuration.tableHeaders %}
                            {% block table_header_column %}
                                <th data-data-type="{{ configuration.columnTypes[colIndex] }}"
                                    {% if configuration.columnTypes[colIndex] == 'hidden' %}style="display: none"{% endif %}
                                >
                                    {{ headerName }}
                                </th>
                            {% endblock %}
                            {% set colIndex = colIndex + 1 %}
                        {% endfor %}

                    </tr>
                    </thead>
                {% endblock %}
            {% endif %}


            {% block table_body %}
                <tbody>
                {% block table_body_inner %}

                    {% for rowData in configuration.tableRows %}

                        <tr>

                            {% block table_body_row %}

                                {% block table_body_row_selection %}
                                    {% if configuration.showRowSelection %}
                                        <td class="row-selection-column">
                                            {% set randId = "row_select_"~random(0,99999999) %}
                                            <input type="checkbox" class="toggleRow" id="{{ randId }}"/>
                                            <label for="{{ randId }}"></label>
                                        </td>
                                    {% endif %}

                                    {% if configuration.isPositioned %}
                                        <td class="row-position-column">
                                            {{ 'apps-grid-icon'|icon('SpawnCommon') }}
                                        </td>
                                    {% endif %}
                                {% endblock %}

                                {% set colIndex = 0 %}
                                {% for key, data in rowData %}

                                    <td data-key="{{ key }}" data-data-type="{{ configuration.columnTypes[colIndex] }}" {% if configuration.columnTypes[colIndex] == 'hidden' %}style="display: none"{% endif %}>
                                        {% block table_body_column %}
                                            {% if configuration.columnTypes[colIndex] == 'datetime' %}
                                                <span>{{ data|date(constant('SpawnCore\\Defaults\\Defaults::DATE_TIME_STORAGE_FORMAT')) }}</span>
                                            {% elseif configuration.columnTypes[colIndex] == 'bool' %}
                                                {% set randId = "row_bool_"~random(0,99999999) %}
                                                <input type="checkbox" id="{{ randId }}" {% if data %}checked="checked"{% endif %}/>
                                                <label for="{{ randId }}"></label>
                                            {% else %}

                                                {% set link = configuration.columnLinks[configuration.tableHeaders[colIndex]]|default(0) %}
                                                {% if link %}
                                                    {% set partsData = [] %}
                                                    {% for part in link.parts %}
                                                        {% set partsData = partsData|merge([rowData[part]]|default('-')) %}
                                                    {% endfor %}
                                                    <a href="{{ seo_url(link.route, partsData) }}">
                                                {% endif %}

                                                <span>{{ data|default('-') }}</span>

                                                {% if link %}</a>{% endif %}

                                            {% endif %}
                                        {% endblock %}

                                    </td>

                                    {% set colIndex = colIndex + 1 %}
                                {% endfor %}
                            {% endblock %}
                        </tr>

                    {% endfor %}
                {% endblock %}
                </tbody>
            {% endblock %}
        {% endblock %}
    </table>

    {% block table_after %}
        <div class="row-selection-actionbar">
            <span>helloworld</span>
        </div>
    {% endblock %}


    {% block table_pagination_container %}
        {% if not configuration.pagination.hide %}
            {% include "template/elements/table/pagination.html.twig" with {
                availablePages: ((configuration.tableRows|length) / (configuration.itemsPerPage|default(10)))|round(0,'ceil') ?: 1,
                currentPage: configuration.itemsPerPage|default(1)
            } only %}
        {% endif %}
    {% endblock %}
{% endblock %}

